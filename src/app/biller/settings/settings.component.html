<section>
  <mat-tab-group>
    <mat-tab label="General">
      <h1>Settings</h1>
      <form class="form" [formGroup]="settingsForm" (ngSubmit)="saveSettings()">
        <mat-form-field class="example-form-field" appearance="outline">
          <mat-label>Project Name:</mat-label>
          <input matInput type="text" formControlName="projectName" />
        </mat-form-field>
        <mat-form-field class="example-form-field" appearance="outline">
          <mat-label>Phone Number:</mat-label>
          <input matInput type="text" formControlName="phoneNumber" />
        </mat-form-field>
        <mat-form-field class="example-form-field" appearance="outline">
          <mat-label>Address:</mat-label>
          <input matInput type="text" formControlName="address" />
        </mat-form-field>
        <mat-form-field class="example-form-field" appearance="outline">
          <mat-label>Port:</mat-label>
          <input matInput type="text" formControlName="port" />
        </mat-form-field>
        <mat-form-field class="example-form-field" appearance="outline">
          <mat-label>GST No:</mat-label>
          <input matInput type="text" formControlName="gstNumber" />
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Choose Printer For Bill</mat-label>
          <mat-select formControlName="billPrinter">
            <mat-option>Clear</mat-option>
            <mat-option [value]="printer" *ngFor="let printer of printers">{{
              printer
            }}</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Choose Printer For KOT</mat-label>
          <mat-select formControlName="kotPrinter">
            <mat-option>Clear</mat-option>
            <mat-option [value]="printer" *ngFor="let printer of printers">{{
              printer
            }}</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field class="example-form-field" appearance="outline">
          <mat-label>FSSAI No:</mat-label>
          <input matInput type="text" formControlName="fssaiNo" />
        </mat-form-field>
        <mat-form-field class="example-form-field" appearance="outline">
          <mat-label>Counter No:</mat-label>
          <input matInput type="text" formControlName="counterNo" />
        </mat-form-field>
        <mat-form-field class="example-form-field" appearance="outline">
          <mat-label>Cashier Name:</mat-label>
          <input matInput type="text" formControlName="cashierName" />
        </mat-form-field>
        <mat-form-field class="example-form-field" appearance="outline">
          <mat-label>Device Name:</mat-label>
          <input matInput type="text" formControlName="deviceName" />
        </mat-form-field>
        <button
          color="primary"
          style="margin-right: 20px"
          (click)="cancelSettings()"
          mat-stroked-button
          type="button"
        >
          Cancel
        </button>
        <button
          color="primary"
          style="margin-right: 20px"
          mat-flat-button
          type="submit"
        >
          Submit
        </button>
      </form>
    </mat-tab>
    <mat-tab label="Printer">
      <h1>Printer Settings</h1>
      <button mat-button color="primary" type="button" (click)="addConfig()">
        <mat-icon>add</mat-icon> Add Config
      </button>
      <form (ngSubmit)="setPrinters()">
        <div class="grid">
          <ng-container *ngFor="let config of configs">
            <mat-form-field appearance="outline">
              <mat-label>Choose Printer For Bill</mat-label>
              <mat-select [formControl]="config.printerControl">
                <mat-option>Clear</mat-option>
                <mat-option
                  [value]="printer"
                  *ngFor="let printer of printers"
                  >{{ printer }}</mat-option
                >
              </mat-select>
            </mat-form-field>
            <div class="categories">
              <ol>
                <li *ngFor="let item of config.categories">
                  <mat-checkbox
                    [(ngModel)]="item.selected"
                    [indeterminate]="item.indeterminate"
                    [checked] = "item.selected"
                    (change)="onCategoryChange(item)"
                    [ngModelOptions]="{ standalone: true }"
                    >{{ item.name }}</mat-checkbox
                  >
                  <ol>
                    <li *ngFor="let product of item.products">
                      <mat-checkbox
                        [(ngModel)]="product.selected"
                        (change)="onProductChange(item)"
                        [ngModelOptions]="{ standalone: true }"
                        >{{ product.name }}</mat-checkbox
                      >
                    </li>
                  </ol>
                </li>
              </ol>
            </div>
          </ng-container>
          <h2 *ngIf="configs.length==0">No Configs Found</h2>
        </div>
        <button mat-raised-button type="submit" color="primary">Submit</button>
      </form>
    </mat-tab>
  </mat-tab-group>
</section>
